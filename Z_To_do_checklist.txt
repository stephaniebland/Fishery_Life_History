##########LIFE STAGES IN FOOD WEBS##########
Life History Incorporation into Food Web must fit following requirements:

1. None of the lifestages are autotrophs
2. All lifestages have reasonable trophic levels
3. All lifestages must be connected to basal species (for consistency) 
4. Do we care if there are disconnected webs? (for consistency)  

I mean, technically all *species* are already guaranteed to fufill requirements, since they go through the adult stage which was constrained with 3 and 4.  So adults have a basal species link. 

One way of doing this is when you recreate your food web, you can temporarily set all the intraspecific links to 0 (so no cannibalism), and then check for the basalsp and connectivity.  This takes care of 3+4.  
- Depending on how strong you want the requirement to be, you might want to also set all the links between any lifestages (even between different fish species!) as 0 -> so that if one species goes extinct you won't be stuck with species that don't lead to basal. Sure, this can still happen with the normal food web, but taking out an entire species will remove several nodes. [I think I might be going crazy here, is this overthinking it or making it overly complicated? I think so.]

###Solution?###
So there's a question of how one should assign diet for the new life stages.  We could either A) use mass to come up with an approximate niche value and assign them using the old nichemodel.m script as Neo's Nature 2000 paper says, or B) you could assign them trophic levels and choose their diet based on that.  If we choose to use B), there are two methods for doing that:  1) just make sure that the average of their prey has the right trophic level, or 2) try to solve for the vector y, where y_i is the average of the shortest route and another vector x, where x=(I-Q)^(-1)*1.  Alternatively you could use method C), which is to add a few more nodes to the model and then rank them by trophic level to assign them to a species and a life stage after the fact. 

My gut feeling is that B1) will work well enough, because you might be able to assume that you aren't adding enough new nodes to drastically change the rest of the food web or trophic levels.  Also, it's probably alright to use it since you only need the trophic levels of the new life stages to be *roughly* accurate. B2) would be ideal, but I'm not sure how that would work. Maybe I could use eigenvectors?  C) is a little bit messy, since there's no guarantee that you won't end up with a bunch of autotrophs or juveniles that prey on adults of their own species.  

Ok so here is my solution:  create a new food web generator based off of this and have it assign diet so that the average trophic level of it's prey species is T-1.

###THE REAL SOLUTION###
It turns out that many fish species don't have strictly increasing trophic levels as they age, some start of as omnivores and end up as planktivores.  For instance, in salt water species *Lagodon rhomboides* and *Diplodus holbrooki* the trophic levels decrease (Stoner and Livingston 1984 Table 6), in particular *L. rhomboides* reverts from omnivory to herbivory. 

Hence, it makes sense to use niche level rather than trophic level to determine the diet.  Because it doesn't matter whether their trophic level is strictly increasing, just that it follows that pattern approximately.

Neo Martinez also confirmed that each fish species is assigned food according to it's overall life history, it's not just the adult life stage's diet that's being represented.  Therefore, it makes sense to divide the diet between life stages.  Now there's just a question of *how* to do *that*.  Especially if you want an overlap in diet between lifestages.  I mean, technically you could just use a function to say what fish eat instead of using a matrix format. 	[For instance, fish will eat at least one species at each life stage, and the youngest will eat the first 20 percentile of fish represented, the second will eat species that fall in 10-40 percentile ranks of their prey's niches....  Here's a representation:  Suppose Pinfish eat species {5,6,7,8,9,10,11,12,13,14}, and niche value strictly increases with species number.  So the first life stage eats {5,6}, second lifestage eats {6,7,8}, etc.]
	[Alternatively, you could just use a function that gradually introduces each new prey species into the diet, while replacing old prey species, until they go through all of them)
	Ultimately though, you can always use that function to determine what fills in your matrix anyhow, and matrices are preferable anyhow for maturation (wait, really?  *Are they*???  I'm not sure anymore.  Because with a matrix, you can have discrete life stages where the diet changes overnight while they age, whereas functions on their own could make the diet more continuous and natural.  Additionally, maturation rates and fecundity will likely be determined by continuous functions as well.)  SO WHY ARE WE USING MATRICES AT ALL??? WHAT'S THE ADVANTAGE? I DON'T GET IT! I know it's probably faster to compute, but does it really take that much less time?
	You still are left with a function problem though - how do you parameterize it in a realistic way.  I can easily put in place holders for now, but that seems like a moot point when I don't even know whether it should be continuous (functions) or discrete (matrix).
	**OH SNAP, I think I figured out the issue.  You want to keep them as discrete nodes so you can track biomass.**  


##########CONFIRM WHETHER MODEL ALLOWS LOOPS##########
- YES IT DOES! They fixed the loop issue mentioned in Williams and Martinez Nature 2000.
- Re-read papers (because each species prey is centered at c, and c is assigned a value in [r/2,n])
- This means that each species can eat prey larger than it!
- This also implies cannibalism (that sentence in Williams and Martinez 2000 Nature "Computational considerations require that chains with loops be ignored" is *really* confusing me right now, I probably took it out of context or don't understand it *at all*.)
- Also, it looks like species eat *every* prey that fall in their range [c-r/2,c+r/2].  So no randomness. 


##########TIME SCALES##########
- Check what time scale the ODE uses.
- Might want to consider using two different timescales:  One for plankton and one for fish.
	- Use to test sensitivity 


##########CANNIBALISM##########
- Run the same model twice, one with no cannibalism, and one where cannibalism is allowed at a parameterized rate
- Maybe guarantee that lifestages will eat previous life stages?


##########ANALYSIS##########
- Time series analysis of lotka volterra relationship
- (Body mass ratio & longevity) correlations with oscillations in life stages (so do longer lived species have more or less oscillations?  Same with longevity)
- Is fish stability and production associated with ecosystem type (ex: autotroph production, variance in autotroph species).
- Are there dominant fish species in the model (in terms of biomass)?  Is it associated with ecosystem type?
- For fishing scenario - decrease metabolic rates and increase prob of maturing  (and for global warming)


##########FUTURE WORK (MAYBE)##########
- Alternative life history strategies _within_ a species (ex:  Mature salmon parr)
- If fish body weight does determine the trophic level to some extent (at least for N. Atlantic species), then maybe it would be important to let TL decline during fishing evolution simulations according to body mass decrease.  But this is something we can implement in the far future when the code is running. See Pauly et al. 2001, Can Fish Aquat Sci.
